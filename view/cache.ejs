<!doctype html>
<html lang="en">

<head>
	<%- include('./_partial/head', { title }); %>
</head>

<body>
	<%- include('./_partial/header', { title }); %>

	<div class="px-3">
		<div class="container mx-auto -mt-24">
			<div class="card card-body bg-base-200 min-h-25 rounded-b-none">

				<div class="flex flex-col gap-6">
					<h2 class="text-3xl text-harvest-gold-400 font-medium">
						<%= cache.display_name %> <%= cache.build %> Cache
					</h2>

					<hr class="border-t-2 border-white/20">

					<div class="grid grid-cols-5 gap-4">
						<div class="col-span-5 md:col-span-2">

							<% if (cache.timestamp !== null) { %>
							Released on <%= cache.timestamp.toISOString().split('T')[0] %>
							<br>
							<% } %>

							<a class="hover:text-gray-300 underline" href="/caches/<%= cache.id %>/cache.zip">Download cache</a><br>
							<% if (cache.js5) { %>
							<sup>This is a zip export with main_file_cache.dat2 inside.</sup>
							<% } else if (cache.ondemand) { %>
							<sup>This is a zip export with main_file_cache.dat inside.</sup>
							<% } else { %>
							<sup>This is a zip export with individual files inside.</sup>
							<% } %>

							<% if (cache.js5 || cache.ondemand) { %>
							<br>
							<a class="hover:text-gray-300 underline" href="/caches/<%= cache.id %>/files.zip">Download flat files</a><br>
							<sup>This is a zip export with individual files inside.</sup>
							<% } %>

						</div>

						<div class="col-span-5 md:col-span-3">

							<% if (cache.jag) { %>
							<hr class="my-1 bg-gray-600 border-gray-600 border-00">
							<% for (const file of data) { %>
							<% if (file.len !== null) { %>
							<a class="hover:text-gray-300 underline" href="/caches/<%= cache.id %>/get/<%= file.name %>" title="<%= file.name %>">
								<%= file.name %>: <%= file.len %> bytes
							</a><br>
							<sup>CRC: <%= file.crc %></sup>
							<% } else { %>
							<%= file.name %> (missing)
							<% } %>
							<br>
							<% } %>
							<% } %>

							<% if (clients.length) { %>
							<hr class="my-1 bg-gray-600 border-gray-600 border-00">

							Related Files<br>

							<% for (const client of clients) { %>
							<a class="hover:text-gray-300 underline" href="/clients/<%= client.id %>" title="<%= client.name %>">
								<%= client.name %>: <%= client.len %> bytes
							</a>
							<br>
							<% } %>
							<% } %>

						</div>
					</div>
				</div>

				<div class="flex justify-center mt-1 mb-1">
					<span class="text-xs">Page: <%= stats.timeTaken %> ms</span>
				</div>

			</div>
		</div>
	</div>
</body>

<%- include('./_partial/footer'); %>

</html>