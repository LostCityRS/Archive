<!doctype html>
<html lang="en">

<head>
	<%- include('./_partial/head', { title }); %>
</head>

<body>
	<%- include('./_partial/header', { title, icon }); %>

	<div class="px-3">
		<div class="container mx-auto -mt-24">
			<div class="card card-body bg-base-200 min-h-25 rounded-b-none">

				<div>
					<div class="relative overflow-x-auto rounded-field border border-base-content/5 bg-base-300">
						<table class="table table-zebra">
							<thead>
								<tr>
									<th scope="col">
										Build
									</th>
									<th scope="col">
										Release Date
									</th>
									<th scope="col">
										News Post
									</th>
									<th scope="col">
									</th>
								</tr>
							</thead>
							<tbody>
								<% for (cache of caches) { %>
								<tr>
									<td class="w-0 whitespace-nowrap font-medium text-heading">
										<%= cache.build %>
									</td>
									<td>
										<%= cache.timestamp ? cache.timestamp.toISOString().split('T')[0] : '-' %>
									</td>
									<td>
										<% if (game.newspost_url !== null && cache.newspost !== null) { %>
										<a class="hover:text-gray-300" href="<%= game.newspost_url%><%= encodeURI(cache.newspost) %>" rel="noreferrer"><%= cache.newspost %></a>
										<% } else { %>
										<%= cache.newspost ?? '-' %>
										<% } %>
									</td>
									<td class="w-0 whitespace-nowrap">
										<a class="btn btn-sm btn-success" href="/caches/<%= cache.id %>/cache.zip">Download</a>
									</td>
								</tr>
								<% } %>
							</tbody>
						</table>
					</div>
				</div>

				<div class="flex justify-center mt-1 mb-1">
					<span class="text-xs">Database Size: <%= (stats.len / 1024 / 1024) | 0 %> MB, Page: <%= stats.timeTaken %> ms</span>
				</div>
                
			</div>
		</div>
	</div>
</body>

<%- include('./_partial/footer'); %>

</html>